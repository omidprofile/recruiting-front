<div class="dashboard col-12">
	<div class="headline-title col-12 col-xl-10 mb-3">لیست مغایرت</div>
	<div class="col col-12 col-xl-10">
		<table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
			
			<!--- Note that these columns can be defined in any order.
				  The actual rendered columns are set as a property on the row definition" -->
			
			<!-- Position Column -->
			<ng-container matColumnDef="name">
				<th mat-header-cell *matHeaderCellDef> نام </th>
				<td mat-cell *matCellDef="let element"> {{element.name}} </td>
			</ng-container>
			
			<!-- Name Column -->
			<ng-container matColumnDef="personal_code">
				<th mat-header-cell *matHeaderCellDef> کدپرسنلی </th>
				<td mat-cell *matCellDef="let element"> {{element.personal_code |persianNumbers}} </td>
			</ng-container>
			
			<ng-container matColumnDef="device">
				<th mat-header-cell *matHeaderCellDef> دستگاه </th>
				<td mat-cell *matCellDef="let element"> {{element.device |persianNumbers}} </td>
			</ng-container>
			
			<!-- Weight Column -->
			<ng-container matColumnDef="date">
				<th mat-header-cell *matHeaderCellDef> تاریخ </th>
				<td mat-cell *matCellDef="let element"> {{element.date |persianNumbers}} </td>
			</ng-container>
			
			<!-- Symbol Column -->
			<ng-container matColumnDef="day">
				<th mat-header-cell *matHeaderCellDef> روز </th>
				<td mat-cell *matCellDef="let element"> {{element.day}} </td>
			</ng-container>
			
			<ng-container matColumnDef="device_type">
				<th mat-header-cell *matHeaderCellDef> نوع فعالیت دستگاه: </th>
				<td mat-cell *matCellDef="let element">
					<div *ngIf="element.device_type == 'ورود'" class="in">ورود</div>
					<div *ngIf="element.device_type == 'خروج'" class="out">خروج</div>
				
				</td>
			</ng-container>
			
			<ng-container matColumnDef="device_time">
				<th mat-header-cell *matHeaderCellDef> ساعت دستگاه </th>
				<td mat-cell *matCellDef="let element"> {{element.device_time |persianNumbers}} </td>
			</ng-container>
			
			<ng-container matColumnDef="guard" *ngIf="type == 'conflict'">
				<th mat-header-cell *matHeaderCellDef>  نگهبان </th>
				<td mat-cell *matCellDef="let element"> {{element.guard |persianNumbers}} </td>
			</ng-container>
			
			<ng-container matColumnDef="guard_time" *ngIf="type == 'conflict'">
				<th mat-header-cell *matHeaderCellDef> ساعت نگهبانی </th>
				<td mat-cell *matCellDef="let element"> {{element.guard_time |persianNumbers}} </td>
			</ng-container>
			
			<ng-container matColumnDef='guard_type' *ngIf="type == 'conflict'">
				<th mat-header-cell *matHeaderCellDef> نوع فعالیت نگهبانی: </th>
				<td mat-cell *matCellDef="let element">
					<div *ngIf="element.guard_type == 'ورود'" class="in">ورود</div>
					<div *ngIf="element.guard_type == 'خروج'" class="out">خروج</div>
				
				</td>
			</ng-container>
			
			<ng-container matColumnDef="reason" *ngIf="type == 'conflict'">
				<th mat-header-cell *matHeaderCellDef> علت </th>
				<td mat-cell *matCellDef="let element">
					<b>
						
						{{element.reason |persianNumbers}}
					
					</b>
				</td>
			</ng-container>
			
			<ng-container matColumnDef="action">
				<th mat-header-cell *matHeaderCellDef>  </th>
				<td mat-cell *matCellDef="let element">
					<div class="d-flex justify-content-start align-items-baseline" *ngIf="type == 'conflict'">
						<button mat-stroked-button color="accent"  class="me-3" (click)="openAcceptDialog(element)"  >تایید</button>
						<button mat-stroked-button color="warn" (click)="openEditDialog(element)">اصلاح</button>
					</div>
					<div class="d-flex justify-content-start align-items-baseline" *ngIf="type == 'daily'">
						<button mat-stroked-button color="accent"  class="me-3" (click)="openAcceptDialog(element)"  >تایید</button>
						<button mat-stroked-button color="warn" (click)="openEditDialog(element)">گزارش</button>
					</div>
					<div class="d-flex justify-content-start align-items-baseline" *ngIf="type == 'accepted'">
						<button mat-stroked-button color="accent"  class="me-3" (click)="openAcceptDialog(element)"  >جزئیات</button>
						<button mat-stroked-button color="warn" (click)="openEditDialog(element)">بررسی مجدد</button>
					</div>
				</td>
			</ng-container>
			
			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
		</table>
	</div>

</div>



<ng-container matColumnDef="reason">
	<th mat-header-cell *matHeaderCellDef> علت </th>
	<td mat-cell *matCellDef="let element"> {{element.reason |persianNumbers}} </td>
</ng-container>